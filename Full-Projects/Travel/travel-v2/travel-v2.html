<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel v.2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/styles-travel-v2.css">
    <style>
        #speech-synthesis {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        #speech-synthesis h1 {
            font-size: 3rem;
            text-transform: uppercase;
            margin-bottom: 2rem;
        }
        #speech-synthesis h2 {
            text-transform: capitalize;
        }
        #speech-synthesis label {
            text-transform: capitalize;
        }
        #speech-synthesis button {
            display: inline-block;
            margin-top: 2rem;
            margin-bottom: 2rem;
            padding: 0.4em 2em;
            text-transform: uppercase;
            border: 1px solid;
            border-radius: 1em;
        }

        #delete3 {
            padding: 10vh 20px;
            min-height: 100vh;
        }

        h1 {
            padding: 100px 0;
            font-size: 10vw;
            text-align: center;
            text-transform: uppercase;
        }

        p {
            margin: 25vh 0;
            font-size: calc(3vw + 12px);
        }
        p::first-letter {
            text-transform: uppercase;
        }
        .gap {
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .slider {
            margin-top: 10rem;
            margin-left: -20px;
            margin-right: -20px;
        }
        .js .slider {
            /* height: 300vh; */
        }

        .scrollable {
            height: 100vh;
            display: flex;
            align-items: center;
            /* overflow-x: auto; */
        }
        .js .slider .scrollable {
            /* overflow: hidden; */
            /* position: -webkit-sticky; */
            /* position: sticky; */
            /* top: 0; */
        }

        .scrollable-container {
            display: flex;
            align-items: center;
        }
        .scrollable-container img {
            flex-shrink: 0;
            max-width: none;
            max-height: 90vh;
            margin: 0 2rem;
        }

        .horiz-scroll {
            direction: ltr;
            overflow-y: hidden;
            overflow-x: scroll;
        }
    </style>
</head>
<body>

    </script>
    <!-- observer pattern -->
    <script>
        function Subject() {
            this.observers = [];
        }

        Subject.prototype = {
            subscribe: function (func) {
                this.observers.push(func);
            },
            unsubscribe: function (func) {
                this.observers = this.observers.filter(x => {
                    if (x != func) {
                        return func;
                    }
                });
            },
            fire: function () {
                this.observers.forEach(func => func.call());
            },
        }

        const subject = new Subject();
        subject.subscribe(observer1);
        subject.subscribe(observer2);
        subject.unsubscribe(observer1);

        subject.fire();

        function observer1() {
            console.log("observer1 fire");
        }
        function observer2() {
            console.log("observer2 fire");
        }
    </script>

    <!-- proxy pattern -->
    <script>
        ////////////////////////////////////////////////
        // simulation of External API
        function CryptocurrencyAPI() {
            this.getValue = function (coin) {
                console.log("<<Send GET request to the CryptocurrencyAPI >>");
                switch(coin) {
                    case "Bitcoin": 
                    return "$3,500";
                    case "Litecoin": 
                    return "$50";
                    case "Etherium": 
                    return "$175";
                }
            };
        }
        ////////////////////////////////////////////////

        const api = new CryptocurrencyAPI();

        function send(coin) {
            return `The value of ${coin} is ${api.getValue(coin)}`;
        }
        
        console.log(send("Bitcoin"));
        console.log(send("Litecoin"));
        console.log(send("Etherium"));

        // Proxy
        function CryptocurrencyProxy() {
            this.api = new CryptocurrencyAPI();
            this.cashe = {};

            this.getValue = function (coin) {
                if (this.cashe[coin] == null) {
                    this.cashe[coin] = this.api.getValue(coin);
                }
                console.log(`Get the value of ${coin} from the cash`);
                return this.cashe[coin];
            }
        }

        const proxy = new CryptocurrencyProxy();

        console.log(proxy.getValue("Bitcoin"));
        console.log(proxy.getValue("Litecoin"));
        console.log(proxy.getValue("Etherium"));
        console.log(proxy.cashe);
        console.log(proxy.getValue("Etherium"));
    </script>

    <!-- builder pattern with constructor function -->
    <script>
        function Person(name, height, weight, gender) {
            this.name = name;
            this.height = height;
            this.weight = weight;
            this.gender = gender;
        }
        
        function PersonBuilder(name, gender) {
            this.name = name;
            this.gender = gender;
            
            this.setHeight = function (height) {
                this.height = height;
                return this;
            }
            
            this.setWeight = function (weight) {
                this.weight = weight;
                return this;
            }
            
            this.build = function () {
                return new Person(this.name, this.height, this.weight, this.gender);
            }
        }
        
        const jogata = new PersonBuilder("Jogata", "male").setHeight(1.75).setWeight(60).build();
        console.log(jogata);
    </script>
    <!-- builder pattern with class -->
    <script>
        class Address {
            constructor (zip, street) {
                this.zip = zip;
                this.street = street
            }
        }

        class User {
            constructor (name, age, phone, address) {
                this.name = name;
                this.age = age;
                this.phone = phone;
                this.address = address;
            }
        }

        class UserBuilder {
            constructor (name) {
                this.user = new User(name);
            }

            setAge(age = 20) {
                this.user.age = age;
                return this;
            }

            setPhone(phone = "+359") {
                this.user.phone = phone;
                return this;
            }

            setAddress(address = "bulgaria") {
                this.user.address = address;
                return this;
            }

            build() {
                return this.user;
            }
        }

        let user = new UserBuilder("Jogata").setAge(43).setPhone("+359000000000").setAddress().build();
        console.log(user);
    </script>

    <section id="speech-synthesis" style="display: none;">
        <h1>display the name</h1>
        <label for="fn">first name</label>
        <input type="text" name="fn" id="fn">
        <label for="fmn">first middle name</label>
        <input type="text" name="fmn" id="fmn">
        <label for="lmn">last middle name</label>
        <input type="text" name="lmn" id="lmn">
        <label for="ln">last name</label>
        <input type="text" name="ln" id="ln">
        <button>click</button>
        <h2 id="result"></h2>

        <script>
            const synth = window.speechSynthesis;

            const FName = document.getElementById("fn");
            const FMName = document.getElementById("fmn");
            const LMName = document.getElementById("lmn");
            const LName = document.getElementById("ln");
            const btn = document.querySelector("button");
            const displayPanel = document.getElementById("result");

            btn.addEventListener("click", displayName);

            function displayName() {
                const name = `${FName.value} ${FMName.value} ${LName.value} ${LMName.value}`;
                displayPanel.textContent = name;
                const yellThis = new SpeechSynthesisUtterance(name);
                synth.speak(yellThis);
            }
        </script>
    </section>

    <section id="delete3" class="js">
        <h1>keep scrolling</h1>
        <br>
        <p class="gap">a bit more...</p>
        <div class="slider">
            <div class="scrollable">
                <div class="scrollable-container">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/120372783_340812587254299_774244032306180550_n.jpg" alt="">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/210603643_1010676219690043_7853467171473160756_n.jpg" alt="">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/212573141_870101006920357_9185461114137501578_n.jpg" alt="">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/212696607_565196161514018_1044941815810703332_n.jpg" alt="">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/320075870_672693277833663_8152859641160213840_n.jpg" alt="">
                    <img src="../../../Landing-Pages/Parallax/img/parallaxIV/gallery/72614063_433236090677267_2807365040358828412_n.jpg" alt="">
                </div>
            </div>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Possimus quidem atque architecto numquam tempore explicabo officiis est dolorum exercitationem. Quasi, ipsum? Odit nemo dolore veritatis quos, exercitationem dignissimos ipsum! Autem corporis, inventore saepe culpa asperiores repudiandae molestias debitis magnam consequuntur a nesciunt nulla totam aspernatur aliquid, obcaecati odit! Iste quod possimus excepturi dignissimos ipsa provident incidunt omnis atque voluptatem! Molestiae dolores alias eveniet nostrum aperiam optio! Officiis neque id, facere minus accusamus necessitatibus odit non voluptas atque, dolorum nisi tempora rem. Laborum numquam consequuntur corrupti debitis. Harum aut eius quidem fugiat nulla temporibus, maxime non blanditiis tempora veritatis repellat cumque.</p>

        <script>
            // document.documentElement.classList.add("js");
        </script>
        <script>
            const slider = document.querySelector(".slider");
            const elSliderScroll = document.querySelector(".slider .scrollable");
            const wh = window.innerHeight;
            // let sliderScroll = 0;
            const scrollH = elSliderScroll.scrollWidth - elSliderScroll.offsetWidth;
                    console.log(scrollH);
            window.addEventListener("scroll", function () {
                const scrollTop = window.pageYOffset - slider.offsetTop;
                if (scrollTop > 0) {
                    const scrollH = elSliderScroll.scrollWidth - elSliderScroll.offsetWidth;
                    console.log(scrollH);
                    // document.body.classList.add("horiz-scroll");
                    // console.log(elSliderScroll.scrollWidth);
                    // console.log(elSliderScroll.offsetWidth);
                    elSliderScroll.scrollTo((scrollH / (wh * 2)) * scrollTop, 0);
                } else {
                    elSliderScroll.scrollLeft = 0;
                }
                // else {
                //     elSliderScroll.scrollLeft = elSliderScroll.scrollWidth;
                //     console.log("else");
                // }
            })
        </script>
    </section>
    <section id="delete4"></section>

    <script src="./js/script_travel_v2.js">
        console.log(260);
        console.log(311>130);
    </script>
</body>
</html>