<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel v.2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="./css/styles-travel-v2.css"> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #delete2 {
            padding: 2.5em;
            font-family: sans-serif;
            background-color: #f2feb0;
            display: flex;
            justify-content: center;
        }

        #delete2 h1 {
            margin: 0 0 0.5em 0;
        }
        #delete2 p {
            margin: 1em 0;
            color: #7c7c7c;
            line-height: 25px;
        }

        .tab-menu {
            max-width: 700px;
        }

        .tabs {
            display: flex;
            flex-wrap: wrap;
        }

        .tab {
            border: none;
            font-size: 1em;
            padding: 0.7em 2em;
            text-transform: uppercase;
            background-color: #efefef;
            transition: all 0.3s;
            cursor: pointer;
            border-radius: 0;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .tab:not(.active):hover {
            background-color: #dfdede;
        }
        .tab.active {
            background-color: #fff;
        }

        .tab-content {
            position: relative;
            width: 100%;
            border-radius: 0px 8px 8px 8px;
            background-color: #fff;
            box-shadow: 5px 5px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .content-container {
            height: 25em;
            overflow-y: scroll;
        }

        .content-container::-webkit-scrollbar {
            width: 8px;
        }
        .content-container::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
        .content-container::-webkit-scrollbar-thumb {
            background-color: #ccc;
        }
        .tab-content::-webkit-slider-thumb:hover {
            background-color: #c4c4c4;
        }

        .tab-content img {
            width: 10em;
            margin-right: 0.5em;
        }

        .panel {
            padding: 1.5em;
        }
    </style>
</head>
<body>

    </script>
    <!-- observer pattern -->
    <script>
        function Subject() {
            this.observers = [];
        }

        Subject.prototype = {
            subscribe: function (func) {
                this.observers.push(func);
            },
            unsubscribe: function (func) {
                this.observers = this.observers.filter(x => {
                    if (x != func) {
                        return func;
                    }
                });
            },
            fire: function () {
                this.observers.forEach(func => func.call());
            },
        }

        const subject = new Subject();
        subject.subscribe(observer1);
        subject.subscribe(observer2);
        subject.unsubscribe(observer1);

        subject.fire();

        function observer1() {
            console.log("observer1 fire");
        }
        function observer2() {
            console.log("observer2 fire");
        }
    </script>

    <!-- proxy pattern -->
    <script>
        ////////////////////////////////////////////////
        // simulation of External API
        function CryptocurrencyAPI() {
            this.getValue = function (coin) {
                console.log("<<Send GET request to the CryptocurrencyAPI >>");
                switch(coin) {
                    case "Bitcoin": 
                    return "$3,500";
                    case "Litecoin": 
                    return "$50";
                    case "Etherium": 
                    return "$175";
                }
            };
        }
        ////////////////////////////////////////////////

        const api = new CryptocurrencyAPI();

        function send(coin) {
            return `The value of ${coin} is ${api.getValue(coin)}`;
        }
        
        console.log(send("Bitcoin"));
        console.log(send("Litecoin"));
        console.log(send("Etherium"));

        // Proxy
        function CryptocurrencyProxy() {
            this.api = new CryptocurrencyAPI();
            this.cashe = {};

            this.getValue = function (coin) {
                if (this.cashe[coin] == null) {
                    this.cashe[coin] = this.api.getValue(coin);
                }
                console.log(`Get the value of ${coin} from the cash`);
                return this.cashe[coin];
            }
        }

        const proxy = new CryptocurrencyProxy();

        console.log(proxy.getValue("Bitcoin"));
        console.log(proxy.getValue("Litecoin"));
        console.log(proxy.getValue("Etherium"));
        console.log(proxy.cashe);
        console.log(proxy.getValue("Etherium"));
    </script>

    <!-- builder pattern with constructor function -->
    <script>
        function Person(name, height, weight, gender) {
            this.name = name;
            this.height = height;
            this.weight = weight;
            this.gender = gender;
        }
        
        function PersonBuilder(name, gender) {
            this.name = name;
            this.gender = gender;
            
            this.setHeight = function (height) {
                this.height = height;
                return this;
            }
            
            this.setWeight = function (weight) {
                this.weight = weight;
                return this;
            }
            
            this.build = function () {
                return new Person(this.name, this.height, this.weight, this.gender);
            }
        }
        
        const jogata = new PersonBuilder("Jogata", "male").setHeight(1.75).setWeight(60).build();
        console.log(jogata);
    </script>
    <!-- builder pattern with class -->
    <script>
        class Address {
            constructor (zip, street) {
                this.zip = zip;
                this.street = street
            }
        }

        class User {
            constructor (name, age, phone, address) {
                this.name = name;
                this.age = age;
                this.phone = phone;
                this.address = address;
            }
        }

        class UserBuilder {
            constructor (name) {
                this.user = new User(name);
            }

            setAge(age = 20) {
                this.user.age = age;
                return this;
            }

            setPhone(phone = "+359") {
                this.user.phone = phone;
                return this;
            }

            setAddress(address = "bulgaria") {
                this.user.address = address;
                return this;
            }

            build() {
                return this.user;
            }
        }

        let user = new UserBuilder("Jogata").setAge(43).setPhone("+359000000000").setAddress().build();
        console.log(user);
    </script>

    <section id="delete2">
        <div class="tab-menu">
            <div class="tabs">
                <button class="tab">details</button>
                <button class="tab active">gallery</button>
                <botton class="tab">more</botton>
            </div>
            <div class="tab-content">
                <div class="content-container"></div>
            </div>
        </div>
    </section>

    <section id="delete3"></section>
    <section id="delete4"></section>

    <script>
        const tabs = document.querySelectorAll(".tab");
        const panels = document.querySelectorAll(".panel");
        const container = document.querySelector(".content-container");

        let active = 1;

        const panelData = [
            `
            <h1>tab 1</h1>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Et, repudiandae.</p>
    <h2>Lorem ipsum dolor</h2>
    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quae repudiandae omnis itaque ad et molestias commodi officiis. Maxime accusantium id eligendi sapiente quidem, eum voluptas, natus recusandae ex sequi corporis soluta magni ipsa officia, a iste cumque omnis temporibus vel.</p>
            `, 
            `<h1>tab 2</h1>`, 
            `<h1>tab 3</h1>`
        ]

        tabs.forEach((tab, index, array) => {
            tab.addEventListener("click", () => {
                active = index;
                container.innerHTML = 
                `<div class="panel">
                    ${panelData[active]}
                </div>`;

                container.style.transition = "none";
                container.style.opacity = "0";
    
                for (let i= 0; i < tabs.length; i++) {
                    tabs[i].classList.remove("active");
                }
    
                tabs[index].classList.add("active");
    
                setTimeout(() => {
                    container.style.transition = "300ms";
                    container.style.opacity = "1";
                }, 100);
            })
        })
    </script>

    <script src="./js/script_travel_v2.js">
        console.log(320>190>330);
        console.log(311>130);
    </script>
</body>
</html>